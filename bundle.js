!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=35)}([function(e,t,n){var r=n(22)("wks"),i=n(15),o=n(1).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(5);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){var r=n(11),i=n(24);e.exports=n(6)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(1),i=n(3),o=n(7),a=n(15)("src"),s=Function.toString,u=(""+s).split("toString");n(8).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(c&&(o(n,a)||i(n,a,e[t]?""+e[t]:u.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(23)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){var n=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(e,t){e.exports={}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(2),i=n(39),o=n(40),a=Object.defineProperty;t.f=n(6)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(13);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(10),i=n(0)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(5),i=n(1).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(47),i=n(18);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(22)("keys"),i=n(15);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(11).f,i=n(7),o=n(0)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(1),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";var r=n(26),i=n(27),o=n(4),a=n(3),s=n(7),u=n(9),c=n(43),l=n(21),f=n(50),h=n(0)("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,v,y,m,g){c(n,t,v);var b,E,_,S=function(e){if(!d&&e in I)return I[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},w=t+" Iterator",k="values"==y,O=!1,I=e.prototype,M=I[h]||I["@@iterator"]||y&&I[y],T=M||S(y),D=y?k?S("entries"):T:void 0,C="Array"==t?I.entries||M:M;if(C&&(_=f(C.call(new e)))!==Object.prototype&&_.next&&(l(_,w,!0),r||s(_,h)||a(_,h,p)),k&&M&&"values"!==M.name&&(O=!0,T=function(){return M.call(this)}),r&&!g||!d&&!O&&I[h]||a(I,h,T),u[t]=T,u[w]=p,y)if(b={values:k?T:S("values"),keys:m?T:S("keys"),entries:D},g)for(E in b)E in I||o(I,E,b[E]);else i(i.P+i.F*(d||O),t,b);return b}},function(e,t){e.exports=!1},function(e,t,n){var r=n(1),i=n(8),o=n(3),a=n(4),s=n(12),u=function(e,t,n){var c,l,f,h,d=e&u.F,p=e&u.G,v=e&u.S,y=e&u.P,m=e&u.B,g=p?r:v?r[t]||(r[t]={}):(r[t]||{}).prototype,b=p?i:i[t]||(i[t]={}),E=b.prototype||(b.prototype={});p&&(n=t);for(c in n)l=!d&&g&&void 0!==g[c],f=(l?g:n)[c],h=m&&l?s(f,r):y&&"function"==typeof f?s(Function.call,f):f,g&&a(g,c,f,e&u.U),b[c]!=f&&o(b,c,h),y&&E[c]!=f&&(E[c]=f)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){var r=n(46),i=n(30);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(17),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(1).document;e.exports=r&&r.documentElement},function(e,t,n){var r,i,o,a=n(12),s=n(63),u=n(31),c=n(16),l=n(1),f=l.process,h=l.setImmediate,d=l.clearImmediate,p=l.MessageChannel,v=l.Dispatch,y=0,m={},g=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},b=function(e){g.call(e.data)};h&&d||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++y]=function(){s("function"==typeof e?e:Function(e),t)},r(y),y},d=function(e){delete m[e]},"process"==n(10)(f)?r=function(e){f.nextTick(a(g,e,1))}:v&&v.now?r=function(e){v.now(a(g,e,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):r="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),g.call(e)}}:function(e){setTimeout(a(g,e,1),0)}),e.exports={set:h,clear:d}},function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=i(t),this.reject=i(n)}var i=n(13);e.exports.f=function(e){return new r(e)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";r(this,e),this.bridge=t,this.parent=n,this.typeOfAction=i,this.payload=o,this.name=a,this.handleClick=this.handleClick.bind(this),this.paint=this.paint.bind(this),n.appendChild(this.paint())}return i(e,[{key:"handleClick",value:function(){"HIDE_SINGLE"===this.typeOfAction?this.bridge.sendAction(this.typeOfAction,this.parent.classList):this.bridge.sendAction(this.typeOfAction,this.payload)}},{key:"paint",value:function(){var e=document.createDocumentFragment(),t=document.createElement("div");return t.className="action-button "+this.name,t.addEventListener("click",this.handleClick),e.appendChild(t),e}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n(36);var i=n(71),o=r(i),a=n(76),s=r(a),u=n(78),c=r(u),l=n(79),f=r(l),h=n(80),d=r(h),p=n(81),v=r(p),y=n(82),m=r(y),g=new o.default;new d.default(g),new s.default(g),new c.default(g),new f.default(g),new v.default(g),new m.default(g)},function(e,t,n){"use strict";n(37),n(70)},function(e,t,n){n(38),n(41),n(52),n(56),e.exports=n(8).Promise},function(e,t,n){"use strict";var r=n(14),i={};i[n(0)("toStringTag")]="z",i+""!="[object z]"&&n(4)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(e,t,n){e.exports=!n(6)&&!n(23)(function(){return 7!=Object.defineProperty(n(16)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(5);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){"use strict";var r=n(42)(!0);n(25)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var r=n(17),i=n(18);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){"use strict";var r=n(44),i=n(24),o=n(21),a={};n(3)(a,n(0)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(2),i=n(45),o=n(30),a=n(20)("IE_PROTO"),s=function(){},u=function(){var e,t=n(16)("iframe"),r=o.length;for(t.style.display="none",n(31).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(11),i=n(2),o=n(28);e.exports=n(6)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(7),i=n(19),o=n(48)(!1),a=n(20)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(10);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(19),i=n(29),o=n(49);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(17),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(7),i=n(51),o=n(20)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(18);e.exports=function(e){return Object(r(e))}},function(e,t,n){for(var r=n(53),i=n(28),o=n(4),a=n(1),s=n(3),u=n(9),c=n(0),l=c("iterator"),f=c("toStringTag"),h=u.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(d),v=0;v<p.length;v++){var y,m=p[v],g=d[m],b=a[m],E=b&&b.prototype;if(E&&(E[l]||s(E,l,h),E[f]||s(E,f,m),u[m]=h,g))for(y in r)E[y]||o(E,y,r[y],!0)}},function(e,t,n){"use strict";var r=n(54),i=n(55),o=n(9),a=n(19);e.exports=n(25)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t,n){var r=n(0)("unscopables"),i=Array.prototype;void 0==i[r]&&n(3)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r,i,o,a,s=n(26),u=n(1),c=n(12),l=n(14),f=n(27),h=n(5),d=n(13),p=n(57),v=n(58),y=n(62),m=n(32).set,g=n(64)(),b=n(33),E=n(65),_=n(66),S=u.TypeError,w=u.process,k=u.Promise,O="process"==l(w),I=function(){},M=i=b.f,T=!!function(){try{var e=k.resolve(1),t=(e.constructor={})[n(0)("species")]=function(e){e(I,I)};return(O||"function"==typeof PromiseRejectionEvent)&&e.then(I)instanceof t}catch(e){}}(),D=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},C=function(e,t){if(!e._n){e._n=!0;var n=e._c;g(function(){for(var r=e._v,i=1==e._s,o=0;n.length>o;)!function(t){var n,o,a=i?t.ok:t.fail,s=t.resolve,u=t.reject,c=t.domain;try{a?(i||(2==e._h&&R(e),e._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===t.promise?u(S("Promise-chain cycle")):(o=D(n))?o.call(n,s,u):s(n)):u(r)}catch(e){u(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&L(e)})}},L=function(e){m.call(u,function(){var t,n,r,i=e._v,o=x(e);if(o&&(t=E(function(){O?w.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=O||x(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},x=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!x(t.promise))return!1;return!0},R=function(e){m.call(u,function(){var t;O?w.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},A=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),C(t,!0))},N=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw S("Promise can't be resolved itself");(t=D(e))?g(function(){var r={_w:n,_d:!1};try{t.call(e,c(N,r,1),c(A,r,1))}catch(e){A.call(r,e)}}):(n._v=e,n._s=1,C(n,!1))}catch(e){A.call({_w:n,_d:!1},e)}}};T||(k=function(e){p(this,k,"Promise","_h"),d(e),r.call(this);try{e(c(N,this,1),c(A,this,1))}catch(e){A.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(67)(k.prototype,{then:function(e,t){var n=M(y(this,k));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=O?w.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&C(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=c(N,e,1),this.reject=c(A,e,1)},b.f=M=function(e){return e===k||e===a?new o(e):i(e)}),f(f.G+f.W+f.F*!T,{Promise:k}),n(21)(k,"Promise"),n(68)("Promise"),a=n(8).Promise,f(f.S+f.F*!T,"Promise",{reject:function(e){var t=M(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!T),"Promise",{resolve:function(e){return _(s&&this===a?k:this,e)}}),f(f.S+f.F*!(T&&n(69)(function(e){k.all(e).catch(I)})),"Promise",{all:function(e){var t=this,n=M(t),r=n.resolve,i=n.reject,o=E(function(){var n=[],o=0,a=1;v(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=M(t),r=n.reject,i=E(function(){v(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(12),i=n(59),o=n(60),a=n(2),s=n(29),u=n(61),c={},l={},t=e.exports=function(e,t,n,f,h){var d,p,v,y,m=h?function(){return e}:u(e),g=r(n,f,t?2:1),b=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(o(m)){for(d=s(e.length);d>b;b++)if((y=t?g(a(p=e[b])[0],p[1]):g(e[b]))===c||y===l)return y}else for(v=m.call(e);!(p=v.next()).done;)if((y=i(v,g,p.value,t))===c||y===l)return y};t.BREAK=c,t.RETURN=l},function(e,t,n){var r=n(2);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(9),i=n(0)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(14),i=n(0)("iterator"),o=n(9);e.exports=n(8).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(2),i=n(13),o=n(0)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(1),i=n(32).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(10)(a);e.exports=function(){var e,t,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(o){var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(s&&s.resolve){var h=s.resolve();n=function(){h.then(c)}}else n=function(){i.call(r,c)};return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(2),i=n(5),o=n(33);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var r=n(4);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){"use strict";var r=n(1),i=n(11),o=n(6),a=n(0)("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(0)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t){!function(t){"use strict";function n(e,t,n,r){var o=t&&t.prototype instanceof i?t:i,a=Object.create(o.prototype),s=new d(r||[]);return a._invoke=c(e,n,s),a}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function a(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function u(e){function t(n,i,o,a){var s=r(e[n],e,i);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&g.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,o,a)},function(e){t("throw",e,o,a)}):Promise.resolve(c).then(function(e){u.value=e,o(u)},a)}a(s.arg)}function n(e,n){function r(){return new Promise(function(r,i){t(e,n,r,i)})}return i=i?i.then(r,r):r()}var i;this._invoke=n}function c(e,t,n){var i=O;return function(o,a){if(i===M)throw new Error("Generator is already running");if(i===T){if("throw"===o)throw a;return v()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=l(s,n);if(u){if(u===D)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===O)throw i=T,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=M;var c=r(e,t,n);if("normal"===c.type){if(i=n.done?T:I,c.arg===D)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=T,n.method="throw",n.arg=c.arg)}}}function l(e,t){var n=e.iterator[t.method];if(n===y){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=y,l(e,t),"throw"===t.method))return D;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return D}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,D;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=y),t.delegate=null,D):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,D)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function h(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function p(e){if(e){var t=e[E];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(g.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=y,t.done=!0,t};return r.next=r}}return{next:v}}function v(){return{value:y,done:!0}}var y,m=Object.prototype,g=m.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},E=b.iterator||"@@iterator",_=b.asyncIterator||"@@asyncIterator",S=b.toStringTag||"@@toStringTag",w="object"==typeof e,k=t.regeneratorRuntime;if(k)return void(w&&(e.exports=k));k=t.regeneratorRuntime=w?e.exports:{},k.wrap=n;var O="suspendedStart",I="suspendedYield",M="executing",T="completed",D={},C={};C[E]=function(){return this};var L=Object.getPrototypeOf,x=L&&L(L(p([])));x&&x!==m&&g.call(x,E)&&(C=x);var R=a.prototype=i.prototype=Object.create(C);o.prototype=R.constructor=a,a.constructor=o,a[S]=o.displayName="GeneratorFunction",k.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},k.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,S in e||(e[S]="GeneratorFunction")),e.prototype=Object.create(R),e},k.awrap=function(e){return{__await:e}},s(u.prototype),u.prototype[_]=function(){return this},k.AsyncIterator=u,k.async=function(e,t,r,i){var o=new u(n(e,t,r,i));return k.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},s(R),R[S]="Generator",R[E]=function(){return this},R.toString=function(){return"[object Generator]"},k.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},k.values=p,d.prototype={constructor:d,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(h),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=y)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=y),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=g.call(i,"catchLoc"),s=g.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&g.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,D):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),D},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),h(n),D}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;h(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:p(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=y),D}}}(function(){return this}()||Function("return this")())},function(e,t,n){"use strict";function r(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];f[e].forEach(function(n){n.notify(e,t)})}function t(t){n().then(function(n){e(t,n)}).catch(function(t){e("RAISE_ERROR","C'è stato un errore con il server!"+t)})}function n(){var e=[];return new Promise(function(t,n){o.default.getEventsList().then(function(n){for(var r in n){var i={geo:{lat:n[r].lt,lng:n[r].ln},info:{city:n[r].city,ng:n[r].ng,date:n[r].date,adr:n[r].adr,logo:n[r].logo,format:n[r].format},id:r};e.push(i)}t(e)}).catch(function(e){return n(e)})})}function r(t,n){if(console.log("inputName ",l,t,n),"NEW_SEARCH"===t&&0!==l.length)e("CREATE_SUGGESTION_LIST",l);else{if(e("CHANGE_SCENE","suggestion"),0===n.length)return e("HIDE_MAP"),e("HIDE_SUGGESTION"),e("HIDE_ERROR"),e("CHANGE_SCENE","initial"),!1;n=n.trim();var r=/^[a-zA-Z]|[a-zA-Z]+[a-zA-Z\'\-\s\b]+$/i;n.match(new RegExp(r))?(e("HIDE_ERROR"),n=n[0].toUpperCase()+n.slice(1),o.default.getCitiesList(n).then(function(r){var i=r.filter(function(e){return e.n.startsWith(n)});e(t,i)})):e("RAISE_ERROR","inserisci solo lettere")}}function i(t){t.contains("filter")?e("HIDE_FILTER"):t.contains("single")?e("HIDE_SINGLE"):0===l.length?e("SHOW_MAP"):e("CHANGE_SCENE","close_left"),e("CHANGE_SCENE","map")}function a(t,n){e(t,n),e("HIDE_SUGGESTION"),e("HIDE_FILTER"),e("CHANGE_SCENE","single")}function s(t,n){l.length=0,console.log("center",n);var r={lat:n.lat,lng:n.lng},i={lt:n.lat,ln:n.lng,n:n.name,p:n.prov};e("RESET_FILTER"),e(t,r),e("CHANGE_SCENE","map"),l.push(i),e("SET_VALUE",n.name)}function u(){l.length=0,console.log(l),e("SET_VALUE",l),e("CHANGE_SCENE","initial"),e("HIDE_SUGGESTION"),e("HIDE_MAP")}function c(n,o){switch(n){case"CREATE_SUGGESTION_LIST":r(n,o);break;case"ADD_MARKER":t(n);break;case"SET_CENTER":s(n,o);break;case"FILTER_RESULT_LIST":break;case"REQUEST_SINGLE":a(n,o);break;case"CHANGE_SCENE":e(n,o);break;case"RESET_VALUE":u(),e("RESET_FILTER");break;case"HIDE_SINGLE":i(o);break;case"SHOW_FILTER":e(n,o),e("HIDE_SUGGESTION"),e("CHANGE_SCENE","filter");break;case"HIDE_FILTER":e(n,o),e("SHOW_SUGGESTION"),e("CHANGE_SCENE","map");break;case"SET_FILTER":e(n,o);break;case"NEW_SEARCH":r(n),e("SHOW_SUGGESTION"),e("SET_VALUE",l[0].n),e("CHANGE_SCENE","suggestion");break;case"UNSET_FILTER":e(n);break;default:console.log("nessuna azione ricevuta")}}var l=[],f={};return{sendAction:function(e,t){c(e,t)},registerObserver:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,o=n.length;i<o;i++)f.hasOwnProperty(n[i])||(f[n[i]]=[]),f[n[i]].push(e);console.log("observerList",f)}}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(72),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(73),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=null,u=function(){function e(){r(this,e)}return i(e,null,[{key:"_makeAJAX",value:function(e){return new Promise(function(t,n){null!==s&&(s.abort(),s=null),s=new XMLHttpRequest,s.open("GET",e),s.send(),s.onreadystatechange=function(){4===s.readyState&&(200===s.status?t(JSON.parse(s.responseText)):n(s.status))}})}},{key:"getCitiesList",value:function(t){var n=t[0];return new Promise(function(t,r){a.default.checkCity(n).then(function(i){if(i)a.default.getCity(n).then(function(e){return t(e)});else{var o="assets/data/"+n+".json";e._makeAJAX(o).then(function(e){a.default.setCity(n,e),t(e)}).catch(function(e){return r(e)})}})})}},{key:"getEventsList",value:function(t){return new Promise(function(t,n){var r="assets/data/eventi.json";a.default.storageAvaible("sessionStorage")?a.default.checkEvents()?t(a.default.getEvents()):e._makeAJAX(r).then(function(e){a.default.setEvents(e),t(e)}).catch(function(e){return n(e)}):e._makeAJAX(r).then(function(e){return t(e)}).catch(function(e){return n(e)})})}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(74),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(){r(this,e)}return i(e,null,[{key:"checkCity",value:function(e){return new Promise(function(t){a.default.keys().then(function(n){return t(n.includes(e))})})}},{key:"getCity",value:function(e){return new Promise(function(t,n){a.default.getItem(e).then(function(e){return t(e)})})}},{key:"setCity",value:function(e,t){a.default.setItem(e,t)}},{key:"storageAvaible",value:function(e){try{var t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&0!==storage.length}}},{key:"checkEvents",value:function(){return Boolean(sessionStorage.length)}},{key:"getEvents",value:function(){return JSON.parse(sessionStorage.getItem("Events"))}},{key:"setEvents",value:function(e){sessionStorage.setItem("Events",JSON.stringify(e))}}]),e}();t.default=s},function(e,t,n){(function(t){var n,n;/*!
    localForage -- Offline Storage, Improved
    Version 1.5.3
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
!function(t){e.exports=t()}(function(){return function e(t,r,i){function o(s,u){if(!r[s]){if(!t[s]){var c="function"==typeof n&&n;if(!u&&c)return n(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return o(n||e)},f,f.exports,e,t,r,i)}return r[s].exports}for(var a="function"==typeof n&&n,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,n,r){(function(e){"use strict";function t(){l=!0;for(var e,t,n=f.length;n;){for(t=f,f=[],e=-1;++e<n;)t[e]();n=f.length}l=!1}function r(e){1!==f.push(e)||l||i()}var i,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var a=0,s=new o(t),u=e.document.createTextNode("");s.observe(u,{characterData:!0}),i=function(){u.data=a=++a%2}}else if(e.setImmediate||void 0===e.MessageChannel)i="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var n=e.document.createElement("script");n.onreadystatechange=function(){t(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n)}:function(){setTimeout(t,0)};else{var c=new e.MessageChannel;c.port1.onmessage=t,i=function(){c.port2.postMessage(0)}}var l,f=[];n.exports=r}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";function r(){}function i(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,e!==r&&u(this,e)}function o(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function a(e,t,n){p(function(){var r;try{r=t(n)}catch(t){return v.reject(e,t)}r===e?v.reject(e,new TypeError("Cannot resolve promise with itself")):v.resolve(e,r)})}function s(e){var t=e&&e.then;if(e&&"object"==typeof e&&"function"==typeof t)return function(){t.apply(e,arguments)}}function u(e,t){function n(t){o||(o=!0,v.reject(e,t))}function r(t){o||(o=!0,v.resolve(e,t))}function i(){t(r,n)}var o=!1,a=c(i);"error"===a.status&&n(a.value)}function c(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function l(e){return e instanceof this?e:v.resolve(new this(r),e)}function f(e){var t=new this(r);return v.reject(t,e)}function h(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);for(var o=new Array(n),a=0,s=-1,u=new this(r);++s<n;)!function(e,r){function s(e){o[r]=e,++a!==n||i||(i=!0,v.resolve(u,o))}t.resolve(e).then(s,function(e){i||(i=!0,v.reject(u,e))})}(e[s],s);return u}function d(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);for(var o=-1,a=new this(r);++o<n;)!function(e){t.resolve(e).then(function(e){i||(i=!0,v.resolve(a,e))},function(e){i||(i=!0,v.reject(a,e))})}(e[o]);return a}var p=e(1),v={},y=["REJECTED"],m=["FULFILLED"],g=["PENDING"];t.exports=n=i,i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){if("function"!=typeof e&&this.state===m||"function"!=typeof t&&this.state===y)return this;var n=new this.constructor(r);if(this.state!==g){a(n,this.state===m?e:t,this.outcome)}else this.queue.push(new o(n,e,t));return n},o.prototype.callFulfilled=function(e){v.resolve(this.promise,e)},o.prototype.otherCallFulfilled=function(e){a(this.promise,this.onFulfilled,e)},o.prototype.callRejected=function(e){v.reject(this.promise,e)},o.prototype.otherCallRejected=function(e){a(this.promise,this.onRejected,e)},v.resolve=function(e,t){var n=c(s,t);if("error"===n.status)return v.reject(e,n.value);var r=n.value;if(r)u(e,r);else{e.state=m,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},v.reject=function(e,t){e.state=y,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},n.resolve=l,n.reject=f,n.all=h,n.race=d},{1:1}],3:[function(e,n,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,r=new n,i=0;i<e.length;i+=1)r.append(e[i]);return r.getBlob(t.type)}}function o(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function a(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function s(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function u(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function c(e){return new le(function(t){var n=e.transaction(fe,pe),r=i([""]);n.objectStore(fe).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1})}function l(e){return"boolean"==typeof ue?le.resolve(ue):c(e).then(function(e){return ue=e})}function f(e){var t=ce[e.name],n={};n.promise=new le(function(e){n.resolve=e}),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then(function(){return n.promise}):t.dbReady=n.promise}function h(e){var t=ce[e.name],n=t.deferredOperations.pop();n&&n.resolve()}function d(e,t){var n=ce[e.name],r=n.deferredOperations.pop();r&&r.reject(t)}function p(e,t){return new le(function(n,r){if(e.db){if(!t)return n(e.db);f(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var o=se.open.apply(se,i);t&&(o.onupgradeneeded=function(t){var n=o.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(fe)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),o.onerror=function(e){e.preventDefault(),r(o.error)},o.onsuccess=function(){n(o.result),h(e)}})}function v(e){return p(e,!1)}function y(e){return p(e,!0)}function m(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||n){if(n){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function g(e){return new le(function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)})}function b(e){return i([u(atob(e.data))],{type:e.type})}function E(e){return e&&e.__local_forage_encoded_blob}function _(e){var t=this,n=t._initReady().then(function(){var e=ce[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return a(n,e,e),n}function S(e){f(e);for(var t=ce[e.name],n=t.forages,r=0;r<n.length;r++)n[r]._dbInfo.db&&(n[r]._dbInfo.db.close(),n[r]._dbInfo.db=null);return p(e,!1).then(function(e){for(var t=0;t<n.length;t++)n[t]._dbInfo.db=e}).catch(function(t){throw d(e,t),t})}function w(e,t,n){try{var r=e.db.transaction(e.storeName,t);n(null,r)}catch(r){if(!e.db||"InvalidStateError"===r.name)return S(e).then(function(){var r=e.db.transaction(e.storeName,t);n(null,r)});n(r)}}function k(e){function t(){return le.resolve()}var n=this,r={db:null};if(e)for(var i in e)r[i]=e[i];ce||(ce={});var o=ce[r.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},ce[r.name]=o),o.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=_);for(var a=[],s=0;s<o.forages.length;s++){var u=o.forages[s];u!==n&&a.push(u._initReady().catch(t))}var c=o.forages.slice(0);return le.all(a).then(function(){return r.db=o.db,v(r)}).then(function(e){return r.db=e,m(r,n._defaultConfig.version)?y(r):e}).then(function(e){r.db=o.db=e,n._dbInfo=r;for(var t=0;t<c.length;t++){var i=c[t];i!==n&&(i._dbInfo.db=r.db,i._dbInfo.version=r.version)}})}function O(e,t){var n=this;e=s(e);var r=new le(function(t,r){n.ready().then(function(){w(n._dbInfo,de,function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName),s=a.get(e);s.onsuccess=function(){var e=s.result;void 0===e&&(e=null),E(e)&&(e=b(e)),t(e)},s.onerror=function(){r(s.error)}}catch(e){r(e)}})}).catch(r)});return o(r,t),r}function I(e,t){var n=this,r=new le(function(t,r){n.ready().then(function(){w(n._dbInfo,de,function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName),s=a.openCursor(),u=1;s.onsuccess=function(){var n=s.result;if(n){var r=n.value;E(r)&&(r=b(r));var i=e(r,n.key,u++);void 0!==i?t(i):n.continue()}else t()},s.onerror=function(){r(s.error)}}catch(e){r(e)}})}).catch(r)});return o(r,t),r}function M(e,t,n){var r=this;e=s(e);var i=new le(function(n,i){var o;r.ready().then(function(){return o=r._dbInfo,"[object Blob]"===he.call(t)?l(o.db).then(function(e){return e?t:g(t)}):t}).then(function(t){w(r._dbInfo,pe,function(o,a){if(o)return i(o);try{var s=a.objectStore(r._dbInfo.storeName),u=s.put(t,e);null===t&&(t=void 0),a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){var e=u.error?u.error:u.transaction.error;i(e)}}catch(e){i(e)}})}).catch(i)});return o(i,n),i}function T(e,t){var n=this;e=s(e);var r=new le(function(t,r){n.ready().then(function(){w(n._dbInfo,pe,function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName),s=a.delete(e);o.oncomplete=function(){t()},o.onerror=function(){r(s.error)},o.onabort=function(){var e=s.error?s.error:s.transaction.error;r(e)}}catch(e){r(e)}})}).catch(r)});return o(r,t),r}function D(e){var t=this,n=new le(function(e,n){t.ready().then(function(){w(t._dbInfo,pe,function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName),a=o.clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=a.error?a.error:a.transaction.error;n(e)}}catch(e){n(e)}})}).catch(n)});return o(n,e),n}function C(e){var t=this,n=new le(function(e,n){t.ready().then(function(){w(t._dbInfo,de,function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName),a=o.count();a.onsuccess=function(){e(a.result)},a.onerror=function(){n(a.error)}}catch(e){n(e)}})}).catch(n)});return o(n,e),n}function L(e,t){var n=this,r=new le(function(t,r){if(e<0)return void t(null);n.ready().then(function(){w(n._dbInfo,de,function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName),s=!1,u=a.openCursor();u.onsuccess=function(){var n=u.result;if(!n)return void t(null);0===e?t(n.key):s?t(n.key):(s=!0,n.advance(e))},u.onerror=function(){r(u.error)}}catch(e){r(e)}})}).catch(r)});return o(r,t),r}function x(e){var t=this,n=new le(function(e,n){t.ready().then(function(){w(t._dbInfo,de,function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName),a=o.openCursor(),s=[];a.onsuccess=function(){var t=a.result;if(!t)return void e(s);s.push(t.key),t.continue()},a.onerror=function(){n(a.error)}}catch(e){n(e)}})}).catch(n)});return o(n,e),n}function R(e){var t,n,r,i,o,a=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var c=new ArrayBuffer(a),l=new Uint8Array(c);for(t=0;t<s;t+=4)n=ye.indexOf(e[t]),r=ye.indexOf(e[t+1]),i=ye.indexOf(e[t+2]),o=ye.indexOf(e[t+3]),l[u++]=n<<2|r>>4,l[u++]=(15&r)<<4|i>>2,l[u++]=(3&i)<<6|63&o;return c}function A(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=ye[n[t]>>2],r+=ye[(3&n[t])<<4|n[t+1]>>4],r+=ye[(15&n[t+1])<<2|n[t+2]>>6],r+=ye[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function N(e,t){var n="";if(e&&(n=Re.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===Re.call(e.buffer))){var r,i=be;e instanceof ArrayBuffer?(r=e,i+=_e):(r=e.buffer,"[object Int8Array]"===n?i+=we:"[object Uint8Array]"===n?i+=ke:"[object Uint8ClampedArray]"===n?i+=Oe:"[object Int16Array]"===n?i+=Ie:"[object Uint16Array]"===n?i+=Te:"[object Int32Array]"===n?i+=Me:"[object Uint32Array]"===n?i+=De:"[object Float32Array]"===n?i+=Ce:"[object Float64Array]"===n?i+=Le:t(new Error("Failed to get type for BinaryArray"))),t(i+A(r))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n=me+e.type+"~"+A(this.result);t(be+Se+n)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}}function j(e){if(e.substring(0,Ee)!==be)return JSON.parse(e);var t,n=e.substring(xe),r=e.substring(Ee,xe);if(r===Se&&ge.test(n)){var o=n.match(ge);t=o[1],n=n.substring(o[0].length)}var a=R(n);switch(r){case _e:return a;case Se:return i([a],{type:t});case we:return new Int8Array(a);case ke:return new Uint8Array(a);case Oe:return new Uint8ClampedArray(a);case Ie:return new Int16Array(a);case Te:return new Uint16Array(a);case Me:return new Int32Array(a);case De:return new Uint32Array(a);case Ce:return new Float32Array(a);case Le:return new Float64Array(a);default:throw new Error("Unkown type: "+r)}}function P(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var i=new le(function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction(function(i){i.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){t._dbInfo=n,e()},function(e,t){r(t)})})});return n.serializer=Ae,i}function F(e,t){var n=this;e=s(e);var r=new le(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),t(r)},function(e,t){r(t)})})}).catch(r)});return o(r,t),r}function H(e,t){var n=this,r=new le(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("SELECT * FROM "+i.storeName,[],function(n,r){for(var o=r.rows,a=o.length,s=0;s<a;s++){var u=o.item(s),c=u.value;if(c&&(c=i.serializer.deserialize(c)),void 0!==(c=e(c,u.key,s+1)))return void t(c)}t()},function(e,t){r(t)})})}).catch(r)});return o(r,t),r}function B(e,t,n,r){var i=this;e=s(e);var a=new le(function(o,a){i.ready().then(function(){void 0===t&&(t=null);var s=t,u=i._dbInfo;u.serializer.serialize(t,function(t,c){c?a(c):u.db.transaction(function(n){n.executeSql("INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){o(s)},function(e,t){a(t)})},function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void o(B.apply(i,[e,s,n,r-1]));a(t)}})})}).catch(a)});return o(a,n),a}function G(e,t,n){return B.apply(this,[e,t,n,1])}function U(e,t){var n=this;e=s(e);var r=new le(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("DELETE FROM "+i.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){r(t)})})}).catch(r)});return o(r,t),r}function z(e){var t=this,n=new le(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("DELETE FROM "+r.storeName,[],function(){e()},function(e,t){n(t)})})}).catch(n)});return o(n,e),n}function q(e){var t=this,n=new le(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,n){var r=n.rows.item(0).c;e(r)},function(e,t){n(t)})})}).catch(n)});return o(n,e),n}function W(e,t){var n=this,r=new le(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)},function(e,t){r(t)})})}).catch(r)});return o(r,t),r}function V(e){var t=this,n=new le(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT key FROM "+r.storeName,[],function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);e(r)},function(e,t){n(t)})})}).catch(n)});return o(n,e),n}function X(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(e){return!0}}function K(){return!X()||localStorage.length>0}function Q(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=n.name+"/",n.storeName!==t._defaultConfig.storeName&&(n.keyPrefix+=n.storeName+"/"),K()?(t._dbInfo=n,n.serializer=Ae,le.resolve()):le.reject()}function Z(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}});return o(n,e),n}function J(e,t){var n=this;e=s(e);var r=n.ready().then(function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r});return o(r,t),r}function Y(e,t){var n=this,r=n.ready().then(function(){for(var t=n._dbInfo,r=t.keyPrefix,i=r.length,o=localStorage.length,a=1,s=0;s<o;s++){var u=localStorage.key(s);if(0===u.indexOf(r)){var c=localStorage.getItem(u);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,u.substring(i),a++)))return c}}});return o(r,t),r}function $(e,t){var n=this,r=n.ready().then(function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return o(r,t),r}function ee(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++){var o=localStorage.key(i);0===o.indexOf(e.keyPrefix)&&r.push(o.substring(e.keyPrefix.length))}return r});return o(n,e),n}function te(e){var t=this,n=t.keys().then(function(e){return e.length});return o(n,e),n}function ne(e,t){var n=this;e=s(e);var r=n.ready().then(function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return o(r,t),r}function re(e,t,n){var r=this;e=s(e);var i=r.ready().then(function(){void 0===t&&(t=null);var n=t;return new le(function(i,o){var a=r._dbInfo;a.serializer.serialize(t,function(t,r){if(r)o(r);else try{localStorage.setItem(a.keyPrefix+e,t),i(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||o(e),o(e)}})})});return o(i,n),i}function ie(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function oe(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Pe(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();"undefined"==typeof Promise&&e(3);var ue,ce,le=Promise,fe="local-forage-detect-blob-support",he=Object.prototype.toString,de="readonly",pe="readwrite",ve={_driver:"asyncStorage",_initStorage:k,_support:function(){try{if(!se)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:I,getItem:O,setItem:M,removeItem:T,clear:D,length:C,key:L,keys:x},ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",me="~~local_forage_type~",ge=/^~~local_forage_type~([^~]+)~/,be="__lfsc__:",Ee=be.length,_e="arbf",Se="blob",we="si08",ke="ui08",Oe="uic8",Ie="si16",Me="si32",Te="ur16",De="ui32",Ce="fl32",Le="fl64",xe=Ee+_e.length,Re=Object.prototype.toString,Ae={serialize:N,deserialize:j,stringToBuffer:R,bufferToString:A},Ne={_driver:"webSQLStorage",_initStorage:P,_support:function(){return"function"==typeof openDatabase}(),iterate:H,getItem:F,setItem:G,removeItem:U,clear:z,length:q,key:W,keys:V},je={_driver:"localStorageWrapper",_initStorage:Q,_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&"function"==typeof localStorage.setItem}catch(e){return!1}}(),iterate:Y,getItem:J,setItem:re,removeItem:ne,clear:Z,length:te,key:$,keys:ee},Pe=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Fe={},He={},Be={INDEXEDDB:ve,WEBSQL:Ne,LOCALSTORAGE:je},Ge=[Be.INDEXEDDB._driver,Be.WEBSQL._driver,Be.LOCALSTORAGE._driver],Ue=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],ze={description:"",driver:Ge.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},qe=function(){function e(t){r(this,e);for(var n in Be)if(Be.hasOwnProperty(n)){var i=Be[n],o=i._driver;this[n]=o,Fe[o]||this.defineDriver(i)}this._defaultConfig=oe({},ze),this._config=oe({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":ae(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new le(function(t,n){try{var r=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(i);for(var o=Ue.concat("_initStorage"),a=0,s=o.length;a<s;a++){var u=o[a];if(!u||!e[u]||"function"!=typeof e[u])return void n(i)}var c=function(n){Fe[r]&&console.info("Redefining LocalForage driver: "+r),Fe[r]=e,He[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(c,n):c(!!e._support):c(!0)}catch(e){n(e)}});return a(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=Fe[e]?le.resolve(Fe[e]):le.reject(new Error("Driver not found."));return a(r,t,n),r},e.prototype.getSerializer=function(e){var t=le.resolve(Ae);return a(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return a(n,e,e),n},e.prototype.setDriver=function(e,t,n){function r(){s._config.driver=s.driver()}function i(e){return s._extend(e),r(),s._ready=s._initStorage(s._config),s._ready}function o(e){return function(){function t(){for(;n<e.length;){var o=e[n];return n++,s._dbInfo=null,s._ready=null,s.getDriver(o).then(i).catch(t)}r();var a=new Error("No available storage method found.");return s._driverSet=le.reject(a),s._driverSet}var n=0;return t()}}var s=this;Pe(e)||(e=[e]);var u=this._getSupportedDrivers(e),c=null!==this._driverSet?this._driverSet.catch(function(){return le.resolve()}):le.resolve();return this._driverSet=c.then(function(){var e=u[0];return s._dbInfo=null,s._ready=null,s.getDriver(e).then(function(e){s._driver=e._driver,r(),s._wrapLibraryMethodsWithReady(),s._initDriver=o(u)})}).catch(function(){r();var e=new Error("No available storage method found.");return s._driverSet=le.reject(e),s._driverSet}),a(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!He[e]},e.prototype._extend=function(e){oe(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=Ue.length;e<t;e++)ie(this,Ue[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),We=new qe;t.exports=We},{3:3}]},{},[4])(4)})}).call(t,n(75))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(77),s=r(a),u=n(34),c=r(u),l=function(){function e(t){i(this,e),this.bridge=t,this.DOMElement=document.querySelector("#inputbar"),this.DOMLayoutBar=document.getElementById("leftbar"),this.className=this.DOMElement.classList,this.bridge.registerObserver(this,"CHANGE_SCENE"),this.notify=this.notify.bind(this),this.inputField=new s.default(this.bridge,this.DOMElement),this.resetBtn=new c.default(this.bridge,this.DOMElement,"RESET_VALUE","","reset-btn"),this.backBtn=new c.default(this.bridge,this.DOMElement,"HIDE_SINGLE","","back-btn")}return o(e,[{key:"notify",value:function(e,t){switch(t){case"initial":this.DOMElement.classList="input-bar initial",this.DOMLayoutBar.style.transform="translateX(0)";break;case"suggestion":this.DOMElement.classList="input-bar suggestion",this.DOMLayoutBar.style.transform="translateX(0)";break;case"map":this.DOMElement.classList="input-bar map",this.DOMLayoutBar.style.transform="translateX(-100vw)";break;case"single":this.DOMElement.classList="input-bar single",this.DOMLayoutBar.style.transform="translateX(0)";break;case"filter":this.DOMElement.classList="input-bar filter",this.DOMLayoutBar.style.transform="translateX(0)";break;case"close_left":this.DOMLayoutBar.style.transform="translateX(-100vw)";break;default:this.DOMElement.classList="input-bar initial"}}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n){r(this,e),this.bridge=t,this.timeout=null,this.parentDOM=n,this.DOMElement=null,this.paint=this.paint.bind(this),this.handleInput=this.handleInput.bind(this),this.notify=this.notify.bind(this),this.updateValue=this.updateValue.bind(this),this.value="",this.parentDOM.appendChild(this.paint()),this.DOMElement=this.parentDOM.querySelector("#search-ipt"),this.bridge.registerObserver(this,"SET_VALUE","RESET_VALUE")}return i(e,[{key:"handleInput",value:function(e){var t=this;clearTimeout(this.timeout),16!==e.keyCode&&(this.timeout=setTimeout(function(){t.bridge.sendAction("CREATE_SUGGESTION_LIST",e.target.value)},800))}},{key:"paint",value:function(){var e=document.createDocumentFragment(),t=document.createElement("input");return t.type="text",t.id="search-ipt",t.className="bar-el search-ipt",t.placeholder="la tua posizione?",t.value=this.value,t.addEventListener("keyup",this.handleInput,!1),e.appendChild(t),e}},{key:"updateValue",value:function(e){this.value=e,this.DOMElement.value=this.value}},{key:"notify",value:function(e,t){switch(e){case"SET_VALUE":case"RESET_VALUE":this.updateValue(t);break;default:console.log("no azioni conosciute")}}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.bridge=t,this.maxSuggestion=6,this.notify=this.notify.bind(this),this.paintList=this.paintList.bind(this),this.handleClick=this.handleClick.bind(this),this.handleResize=this.handleResize.bind(this),this.DOMElement=document.getElementById("suggestion"),this.DOMLayoutBar=document.getElementById("leftbar"),this.DOMElement.addEventListener("click",this.handleClick),this.bridge.registerObserver(this,"CREATE_SUGGESTION_LIST","HIDE_SUGGESTION","SHOW_SUGGESTION")}return i(e,[{key:"handleResize",value:function(){this.DOMElement.style.height=window.innerHeight-65+"px"}},{key:"handleClick",value:function(e){var t=e.target.closest(".single-el");if(t){var n=t.dataset.geo,r=n.indexOf("_"),i={lat:parseFloat(n.slice(0,r)),lng:parseFloat(n.slice(r+1)),name:t.dataset.name,prov:t.dataset.prov};this.bridge.sendAction("SET_CENTER",i)}}},{key:"notify",value:function(e,t){switch(e){case"SHOW_SUGGESTION":this.DOMElement.style.display="flex";break;case"HIDE_SUGGESTION":this.DOMElement.style.display="none";break;default:this.paintList(t)}}},{key:"paintList",value:function(e){for(console.log("result ",e);this.DOMElement.firstChild;)this.DOMElement.removeChild(this.DOMElement.firstChild);0===e.length&&(this.DOMElement.innerHTML='\n                                  <div class="break"></div>\n                                  <h2>UH-OH!!</h2>\n                                  <h3>Sembra che tu abbia inserito un comune non esistente<br/><br/>\n                                  Sicuro non volessi scrivere qualcos\'altro?</h3>\n                                  '),e.length=e.length<this.maxSuggestion?e.length:this.maxSuggestion;for(var t=document.createDocumentFragment(),n=0,r=e.length;n<r;n++)t.appendChild(this.paintSingle(e[n]));this.DOMElement.appendChild(t),this.DOMElement.style.display="flex"}},{key:"paintSingle",value:function(e){var t=document.createElement("div");return t.className="single-el",t.style="height:"+100/this.maxSuggestion+"%",t.setAttribute("data-geo",e.lt+"_"+e.ln),e.n=e.n.length<15?e.n:e.n.slice(0,14)+"...",t.setAttribute("data-name",e.n),t.setAttribute("data-prov",e.p),t.innerHTML="<h4>"+e.n+' <span style="color:#999; font-size:1.3rem">('+e.p+")</span></h4>",t}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.DOMElement=document.getElementById("error"),t.registerObserver(this,"RAISE_ERROR","HIDE_ERROR"),this.notify=this.notify.bind(this)}return i(e,[{key:"notify",value:function(e,t){"HIDE_ERROR"===e?this.DOMElement.style.display="none":(this.DOMElement.style.display="flex",this.DOMElement.innerHTML="<h1>"+t+"</h1>")}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(34),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s={maxZoom:16,minZoom:6,zoom:11,center:{lat:42.40476,lng:12.85735},disableDefaultUI:!0,styles:[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#46bcec"},{visibility:"on"}]}]},u=function(){function e(t){r(this,e),this.bridge=t,this.map=null,this.markerArrays=[],this.markerCluster=null,this.center={},this.markerCenter=null,this.zoom=0,this.initMap=this.initMap.bind(this),this.addMarker=this.addMarker.bind(this),this.checkInBounds=this.checkInBounds.bind(this),this.clearMarkerFromMap=this.clearMarkerFromMap.bind(this),this.setCenter=this.setCenter.bind(this),this.handleClickMarker=this.handleClickMarker.bind(this),this.handleResize=this.handleResize.bind(this),this.DOMElement=document.getElementById("map"),window.initMap=this.initMap,window.addEventListener("resize",this.handleResize,!1);new a.default(this.bridge,this.DOMElement,"SHOW_FILTER","","filter"),new a.default(this.bridge,this.DOMElement,"NEW_SEARCH","","search");this.bridge.registerObserver(this,"ADD_MARKER","SET_CENTER","HIDE_MAP","SHOW_MAP","HIDE_SINGLE","SET_FILTER","UNSET_FILTER")}return i(e,[{key:"initMap",value:function(){this.map=new google.maps.Map(this.DOMElement.querySelector("#mapwrapper"),s),this.bridge.sendAction("ADD_MARKER")}},{key:"handleResize",value:function(){this.DOMElement.style.height=window.innerHeight+"px",this.DOMElement.querySelector("#mapwrapper").style.height=window.innerHeight+"px"}},{key:"addMarker",value:function(e){for(var t=this,n=this,r=0,i=e.length;r<i;r++)!function(r,i){var o=new google.maps.Marker({position:e[r].geo,map:t.map,id:e[r].id,info:e[r].info});t.markerArrays.push(o),o.addListener("click",function(){n.handleClickMarker(o)})}(r);this.markerCluster=new MarkerClusterer(this.map,this.markerArrays,{imagePath:"./assets/img/m"})}},{key:"checkInBounds",value:function(e,t,n){for(var r=0,i=0,o=n.length;i<o&&0===r;i++)t.contains(n[i].getPosition())&&r++;if(!(0===r&&e>5))return!1;e--,this.map.setZoom(e);var a=this.map.getBounds();this.iteration++,this.checkInBounds(e,a,n)}},{key:"clearMarkerFromMap",value:function(e){this.markerCluster.clearMarkers(),e&&this.markerCenter&&this.markerCenter.setMap(null)}},{key:"handleClickMarker",value:function(e){var t={lt:e.position.lat(),ln:e.position.lng(),info:e.info,clt:this.center.lat(),cln:this.center.lng()};console.log(t," marker"),this.zoom=this.map.getZoom(),this.center=this.map.getCenter(),this.map.panTo(e.position),this.map.setZoom(16),this.bridge.sendAction("REQUEST_SINGLE",t)}},{key:"setCenter",value:function(e){this.map.setCenter(e);var t=this.map.getZoom(),n=this.map.getBounds();this.checkInBounds(t,n,this.markerArrays);var r=new google.maps.Marker({position:e,animation:google.maps.Animation.DROP,map:this.map,icon:"http://maps.google.com/mapfiles/ms/icons/green-dot.png"});this.markerCenter=r,this.center=this.map.getCenter()}},{key:"setFilter",value:function(e){for(var t=this,n=[],r=this,i=0,o=e.length;i<o;i++)!function(i,o){var a=new google.maps.Marker({position:e[i].geo,map:t.map,id:e[i].id,info:e[i].info,animation:google.maps.Animation.DROP,icon:"http://maps.google.com/mapfiles/ms/icons/orange-dot.png"});n.push(a),a.addListener("click",function(){r.handleClickMarker(a)})}(i);var a=this.map.getZoom(),s=this.map.getBounds();this.markerCluster=new MarkerClusterer(this.map,n,{imagePath:"./assets/img/m"}),this.checkInBounds(a,s,n)}},{key:"notify",value:function(e,t){switch(console.log("mex da map",e,t),e){case"HIDE_MAP":this.DOMElement.style.opacity=0,this.DOMElement.style.pointerEvents="none";break;case"SHOW_MAP":this.DOMElement.style.opacity=1,this.DOMElement.style.pointerEvents="auto";break;case"SET_CENTER":this.clearMarkerFromMap(t),this.markerCluster=new MarkerClusterer(this.map,this.markerArrays,{imagePath:"./assets/img/m"}),this.map.setZoom(s.zoom),this.setCenter(t),this.DOMElement.style.opacity=1,this.DOMElement.style.pointerEvents="auto";break;case"HIDE_SINGLE":this.map.panTo(this.center),this.map.setZoom(this.zoom);break;case"SET_FILTER":this.clearMarkerFromMap(),this.setFilter(t);break;case"UNSET_FILTER":this.clearMarkerFromMap(),this.markerCluster=new MarkerClusterer(this.map,this.markerArrays,{imagePath:"./assets/img/m"});break;default:this.addMarker(t)}}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],a=function(){function e(t){r(this,e),this.bridge=t,this.notify=this.notify.bind(this),this.handleResize=this.handleResize.bind(this),this.bridge.registerObserver(this,"REQUEST_SINGLE","HIDE_SINGLE"),this.DOMElement=document.querySelector("#detail"),this.detail=null,window.addEventListener("resize",this.handleResize,!1)}return i(e,[{key:"handleResize",value:function(){this.DOMElement.style.height=window.innerHeight-65+"px"}},{key:"paintSingle",value:function(e){var t=document.createDocumentFragment(),n=document.createElement("div");n.className="content",n.id="content";var r=document.createElement("div");r.className="single-ng",r.innerHTML="<h2>"+e.info.ng+"</h2>",n.appendChild(r);var i=document.createElement("div");i.className="single-oblo",n.appendChild(i);var a=document.createElement("div");a.className="single-general";var s=document.createElement("div");s.className="infoGrid";var u=document.createElement("div"),c=new Date(1e3*e.info.date),l=c.getUTCDate()>=1&&c.getUTCDate()<=9?"0"+c.getUTCDate():c.getUTCDate(),f=o[c.getMonth()];u.className="single-row info-chunk date",u.innerHTML="<h4>quando </h4><h3>"+l+" "+f+"</h3>",s.appendChild(u);var h=document.createElement("div");h.className="single-row info-chunk adr",h.innerHTML="<h4>dove </h4><h3>"+e.info.adr+", "+e.info.city+"</h3>",s.appendChild(h);var d=document.createElement("div");d.className="single-row info-chunk eta",d.id="eta",d.innerHTML="<h4>tempo per arrivare </h4><h3>Calcolando ...</h3>",s.appendChild(d);var p=document.createElement("div");return p.className="single-row info-chunk format",p.innerHTML="<h4>formato </h4><h3>"+e.info.format+"</h3>",s.appendChild(p),a.appendChild(s),n.appendChild(a),t.appendChild(n),t}},{key:"calcEta",value:function(e){(new google.maps.DistanceMatrixService).getDistanceMatrix({origins:[{lat:e.clt,lng:e.cln}],destinations:[{lat:e.lt,lng:e.ln}],travelMode:"DRIVING",drivingOptions:{departureTime:new Date(Date.now()),trafficModel:"optimistic"}},function(e,t){if("OK"==t)for(var n=0,r=e.rows.length;n<r;n++)for(var i=0,o=e.rows[n].elements.length;i<o;i++)this.detail.querySelector("#eta").innerHTML="<h4>tempo in macchina </h4><h3>"+e.rows[n].elements[i].duration_in_traffic.text+"</h3>";else this.detail.querySelector("#eta").innerHTML="<h4>tempo in macchina </h4><h3>Non ci è stato possibile calcolare</h3>"})}},{key:"notify",value:function(e,t){switch(e){case"HIDE_SINGLE":this.DOMElement.style.display="none";break;default:for(;this.DOMElement.firstChild;)this.DOMElement.removeChild(this.DOMElement.firstChild);this.DOMElement.appendChild(this.paintSingle(t)),this.calcEta(t),this.DOMElement.style.display="flex",this.detail=this.DOMElement.querySelector("#content")}}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){i(this,e),this.bridge=t,this.events=[],this.filteredEvents=[],this.filterByDistance=this.filterByDistance.bind(this),this.filterByFormat=this.filterByFormat.bind(this),this.filterByDate=this.filterByDate.bind(this),this.sendFilter=this.sendFilter.bind(this),this.filter={dist:{value:null,label:null,data:[],f:this.filterByDistance,applied:!1},date:{value:null,label:null,data:[],f:this.filterByDate,applied:!1},format:{value:null,label:null,data:[],f:this.filterByFormat,applied:!1}},this.center={},this.calendar={qSett:[],pSett:[],dSett:[],other:[]},this.DOMElement=document.querySelector("#filter"),this.DOMInfo=this.DOMElement.querySelector("#filter-container"),this.activePosition=1,this.timeout=null,this.elementWidth=document.getElementById("leftbar").offsetWidth,this.paint=this.paint.bind(this),this.notify=this.notify.bind(this),this.setFilter=this.setFilter.bind(this),this._getDistance=this._getDistance.bind(this),this.updateShowFilter=this.updateShowFilter.bind(this),this.resetFilter=this.resetFilter.bind(this),this.unsetSingleFilter=this.unsetSingleFilter.bind(this),this.updateResult=this.updateResult.bind(this),this.setCalendar=this.setCalendar.bind(this),this.setCarouselPosition=this.setCarouselPosition.bind(this),this.handleResize=this.handleResize.bind(this),this.DOMInfo.appendChild(this.paint()),this.setCalendar(),this.DOMElement.querySelector("#send-button").addEventListener("click",this.sendFilter),this.bridge.registerObserver(this,"ADD_MARKER","SET_CENTER","HIDE_FILTER","SHOW_FILTER","RESET_FILTER"),window.addEventListener("resize",this.handleResize,!1)}return o(e,[{key:"_toRadians",value:function(e){var t=Math.PI/180;return{lat:e.lat*t,lng:e.lng*t}}},{key:"_getDistance",value:function(e,t){var n=this._toRadians(e),r=this._toRadians(t);return parseInt(6380*Math.acos(Math.sin(r.lat)*Math.sin(n.lat)+Math.cos(r.lat)*Math.cos(n.lat)*Math.cos(r.lng-n.lng)))}},{key:"filterByDate",value:function(e,t){var n=this;if(!e)return!1;if("other"===e)this.filter.date.data=t.filter(function(t){return t.info.date>n.calendar[e]}),this.filter.date.applied=!0;else{var r=this.calendar[e][0],i=this.calendar[e][1];this.filter.date.data=t.filter(function(e){return r<=e.info.date&&e.info.date<=i}),this.filter.date.applied=!0}console.log(this.filter.date)}},{key:"filterByDistance",value:function(e,t){var n=this;if(!e)return!1;"other"===e?(this.filter.dist.data=t.filter(function(e){return n._getDistance(n.center,e.geo)>200}),this.filter.dist.applied=!0):(this.filter.dist.data=t.filter(function(t){return n._getDistance(n.center,t.geo)<=e}),this.filter.dist.applied=!0)}},{key:"filterByFormat",value:function(e,t){if(!e)return!1;this.filter.format.data="SEALED"===e?t.filter(function(e){return"SEALED"===e.info.format}):t.filter(function(e){return"SEALED"!==e.info.format}),this.filter.format.applied=!0}},{key:"_getMonday",value:function(e){var t=new Date(e),n=t.getDay()||7;return 1!==n?parseInt(new Date(t.setUTCHours(-24*(n-1))).setUTCHours(0,0,1)/1e3):parseInt(new Date(t).setUTCHours(0,0,1)/1e3)}},{key:"_getSunday",value:function(e){var t=new Date(e),n=t.getDay()||7;return parseInt(new Date(t.setUTCHours(24*(7-n))).setUTCHours(22,59,59)/1e3)}},{key:"handleResize",value:function(){var e=this;this.DOMElement.style.height=window.innerHeight-65+"px",this.timeout||(this.timeout=setTimeout(function(){e.timeout=null,e.elementWidth=document.getElementById("leftbar").offsetWidth,e._resizeCarousel(e.elementWidth)},66))}},{key:"_resizeCarousel",value:function(e){console.log(e),document.getElementById("filter-carousel").style.width=3*e+"px"}},{key:"setCalendar",value:function(){var e=0;for(var t in this.calendar){var n=new Date,r=new Date(n.setUTCHours(7*e*24));this.calendar[t][0]=this._getMonday(r),this.calendar[t][1]=this._getSunday(r),e++}console.log(this.calendar," calendar")}},{key:"setFilter",value:function(e){var t=this;this.filteredEvents.length=0,console.log(this.filter);var n=[],i=0;Array.from(e).map(function(e){t.filter[e.name].value=e.value,t.filter[e.name].label=e.dataset.label});for(var o in this.filter)this.filter[o].f(this.filter[o].value,this.events),this.filter[o].applied&&(n=n.concat(this.filter[o].data),i++);if(console.log("filtri applicati ",i),0===i)this.filteredEvents=this.filteredEvents.concat(this.events),this.updateResult(this.filteredEvents.length);else if(i<2)this.filteredEvents=this.filteredEvents.concat(n),this.updateResult(this.filteredEvents.length);else{var a,s;!function(){var e=n.reduce(function(e,t){return Object.assign(e,r({},t.id,(e[t.id]||0)+1))},{}),o=Object.keys(e).filter(function(t){return e[t]>i-1});for(a=0,s=o.length;a<s;a++)t.filteredEvents.push(t.events.find(function(e){return e.id===o[a]}));t.updateResult(t.filteredEvents.length)}()}this.updateShowFilter()}},{key:"updateResult",value:function(e){var t=Object.values(this.filter),n=t.every(function(e){return!1===e.applied});this.DOMElement.querySelector("#result-filter").innerHTML=n?"<h2>FILTRI</h2>":"<h2>"+e+" Risultati</h2>"}},{key:"updateShowFilter",value:function(){var e=document.createDocumentFragment(),t=this.filter,n=this.DOMElement.querySelector(".show-filter-chosen");for(var r in t){var i=document.createElement("div");i.className="filter-tag",i.className=t[r].applied?"filter-tag":"filter-tag unset",i.innerHTML="<p data-key='"+r+"'>"+t[r].label+"</p><p data-key='"+r+"'>&times;</p>",e.appendChild(i)}for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(e)}},{key:"sendFilter",value:function(){Object.values(this.filter).every(function(e){return!1===e.applied})?this.bridge.sendAction("UNSET_FILTER"):this.bridge.sendAction("SET_FILTER",this.filteredEvents),this.bridge.sendAction("HIDE_FILTER")}},{key:"resetFilter",value:function(){this.filteredEvents.length=0;for(var e in this.filter)this.filter[e].value=null,this.filter[e].label=null,this.filter[e].data.length=0,this.filter[e].applied=!1;for(this.center=null;this.DOMInfo.firstChild;)this.DOMInfo.removeChild(this.DOMInfo.firstChild);this.DOMInfo.appendChild(this.paint()),this.activePosition=1}},{key:"_animationCarousel",value:function(e,t){console.log(t),document.getElementById("filter-carousel").style.transform="translateX("+e*t+"px)"}},{key:"setCarouselPosition",value:function(e){var t=this.elementWidth;this.activePosition=e;var n=parseInt(1-e);this._animationCarousel(n,t)}},{key:"unsetSingleFilter",value:function(e){var t=this.DOMInfo.querySelector("#filter-carousel"),n=t.querySelectorAll(".radio-group."+e+' input[type="radio"]:checked');console.log(n[0].checked),n[0].checked=!1,this.filter[e].value=null,this.filter[e].label=null,this.filter[e].data.length=0,this.filter[e].data=this.filter[e].data.concat(this.events),this.filter[e].applied=!1,this.updateShowFilter(),this.setFilter(t.querySelectorAll('input[type="radio"]:checked'))}},{key:"paint",value:function(){var e=document.createDocumentFragment(),t=(this.filter,this);this.DOMElement.querySelector("#result-filter").innerHTML="<h2>FILTRI</h2>";var n=document.createElement("div");n.className="show-filter-chosen",n.addEventListener("click",function(e){if("P"!==e.target.tagName)return!1;t.unsetSingleFilter(e.target.dataset.key)}),e.appendChild(n);var r=document.createElement("div");r.className="filter-carousel-wrapper";var i=document.createElement("div");i.className="filter-carousel",i.id="filter-carousel",i.setAttribute("style","width: "+3*this.elementWidth+"px");var o=document.createElement("div");o.className="radio-group dist",o.innerHTML="\n                          <input type='radio' id='50km'  name='dist' value='50'  data-label = '< 50 km'/><label for='50km'>< 50<br/>km</label>\n                          <input type='radio' id='100km' name='dist' value='100' data-label = '< 100 km'/><label for='100km'>< 100<br/>km</label>\n                          <input type='radio' id='200km' name='dist' value='200' data-label = '< 200 km'/><label for='200km'>< 200<br/>km</label>\n                          <input type='radio' id='other-dist'   name='dist' value='other' data-label = '+ 200 km'/><label for='other-dist'>+ 200<br/>km</label>\n                         ",i.appendChild(o);var a=document.createElement("div");a.className="radio-group date",a.innerHTML="\n                      <input type='radio' id='qSett' name='date' value='qSett' data-label = 'questa sett' /><label for='qSett'>Questa<br/>sett</label>\n                      <input type='radio' id='pSett' name='date' value='pSett' data-label = 'prossima sett' /><label for='pSett'>Prossima<br/>sett</label>\n                      <input type='radio' id='dSett' name='date' value='dSett' data-label = 'fra due sett'/><label for='dSett'>Fra Due<br/>sett</label>\n                      <input type='radio' id='other-date' name='date' value='other' data-label = 'oltre due sett'/><label for='other-date'>Oltre due<br/>sett</label>\n                      ",i.appendChild(a);var s=document.createElement("div");s.className="radio-group format",s.innerHTML="\n              <input type='radio' id='constructed' name='format' value='CONSTRUCTED' data-label = 'costruito'/><label for='constructed'>Costruito</label>\n              <input type='radio' id='limited' name='format' value='SEALED' data-label = 'limited'/><label for='limited'>Limited</label>\n              ",i.appendChild(s),i.addEventListener("click",function(e){if("INPUT"!==e.target.tagName)return!1;t.setFilter(this.querySelectorAll('input[type="radio"]:checked'))}),r.appendChild(i),e.appendChild(r);var u=document.createElement("div");u.className="carousel-control";var c=document.createElement("div");c.className="carousel-control-button active",c.innerHTML="<p data-carousel-position='1'>Distanza</p>",u.appendChild(c);var l=document.createElement("div");l.className="carousel-control-button",l.innerHTML="<p data-carousel-position='2'>Data</p>",u.appendChild(l);var f=document.createElement("div");return f.className="carousel-control-button",f.innerHTML="<p data-carousel-position='3'>Formato</p>",u.appendChild(f),u.addEventListener("click",function(e){return"P"===e.target.tagName&&(!e.target.parentNode.classList.contains("active")&&(this.querySelector("[data-carousel-position='"+t.activePosition+"']").parentNode.classList.remove("active"),t.setCarouselPosition(e.target.dataset.carouselPosition),void e.target.parentNode.classList.add("active")))}),e.appendChild(u),e}},{key:"notify",value:function(e,t){switch(e){case"ADD_MARKER":this.events=this.events.concat(t);for(var n in this.filter)this.filter[n].data=this.filter[n].data.concat(t);break;case"SET_CENTER":this.center=t;break;case"SHOW_FILTER":this.DOMElement.style.display="flex";break;case"HIDE_FILTER":this.DOMElement.style.display="none";break;case"RESET_FILTER":this.resetFilter();break;default:console.log("nessuna azione conosciuta")}}}]),e}();t.default=a}]);